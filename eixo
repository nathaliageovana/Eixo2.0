[import { useState } from "react";

export default function App() {
  const [activeTab, setActiveTab] = useState("empresa");
  const [selectedServices, setSelectedServices] = useState([]);
  const [companyName, setCompanyName] = useState("");

  return (
    <div className="min-h-screen bg-gray-100 text-gray-800">
      {/* Header */}
      <header className="bg-blue-600 text-white shadow-md">
        <div className="container mx-auto px-4 py-4 flex justify-between items-center">
          <h1 className="text-2xl font-bold">Eixo Seguran√ßa</h1>
          <nav className="space-x-4 hidden md:flex">
            <button
              onClick={() => setActiveTab("empresa")}
              className={`px-3 py-2 rounded-md transition ${
                activeTab === "empresa"
                  ? "bg-blue-700 text-white"
                  : "hover:bg-blue-500"
              }`}
            >
              Cadastro da Empresa
            </button>
            <button
              onClick={() => setActiveTab("consultoria")}
              className={`px-3 py-2 rounded-md transition ${
                activeTab === "consultoria"
                  ? "bg-blue-700 text-white"
                  : "hover:bg-blue-500"
              }`}
            >
              Di√°rias de Consultoria
            </button>
            <button
              onClick={() => setActiveTab("certificados")}
              className={`px-3 py-2 rounded-md transition ${
                activeTab === "certificados"
                  ? "bg-blue-700 text-white"
                  : "hover:bg-blue-500"
              }`}
            >
              Emiss√£o de Nota Fiscal
            </button>
            <button
              onClick={() => setActiveTab("sobre")}
              className={`px-3 py-2 rounded-md transition ${
                activeTab === "sobre"
                  ? "bg-blue-700 text-white"
                  : "hover:bg-blue-500"
              }`}
            >
              Sobre N√≥s
            </button>
          </nav>
        </div>
      </header>

      {/* Sidebar + Content */}
      <div className="flex flex-col md:flex-row">
        {/* Sidebar */}
        <aside className="w-full md:w-64 bg-white shadow-md p-4 space-y-2">
          <h2 className="text-lg font-semibold mb-4">Menu</h2>
          <button
            onClick={() => setActiveTab("empresa")}
            className={`w-full text-left px-4 py-2 rounded-md transition ${
              activeTab === "empresa"
                ? "bg-blue-100 text-blue-700"
                : "hover:bg-gray-200"
            }`}
          >
            üè¢ Cadastro da Empresa
          </button>
          <button
            onClick={() => setActiveTab("consultoria")}
            className={`w-full text-left px-4 py-2 rounded-md transition ${
              activeTab === "consultoria"
                ? "bg-blue-100 text-blue-700"
                : "hover:bg-gray-200"
            }`}
          >
            üìÖ Di√°rias de Consultoria
          </button>
          <button
            onClick={() => setActiveTab("certificados")}
            className={`w-full text-left px-4 py-2 rounded-md transition ${
              activeTab === "certificados"
                ? "bg-blue-100 text-blue-700"
                : "hover:bg-gray-200"
            }`}
          >
            üí∞ Emiss√£o de Nota Fiscal
          </button>
          <button
            onClick={() => setActiveTab("sobre")}
            className={`w-full text-left px-4 py-2 rounded-md transition ${
              activeTab === "sobre"
                ? "bg-blue-100 text-blue-700"
                : "hover:bg-gray-200"
            }`}
          >
            üß≠ Sobre N√≥s
          </button>
        </aside>

        {/* Main Content */}
        <main className="flex-1 p-4 md:p-6 bg-gray-50 min-h-screen">
          {activeTab === "empresa" && <CadastroEmpresa setCompanyName={setCompanyName} />}
          {activeTab === "consultoria" && (
            <ConsultoriaServicos
              selectedServices={selectedServices}
              setSelectedServices={setSelectedServices}
            />
          )}
          {activeTab === "certificados" && (
            <EmissaoNotaFiscal
              companyName={companyName}
              services={selectedServices}
            />
          )}
          {activeTab === "sobre" && <SobreNos />}
        </main>
      </div>

      {/* Footer */}
      <footer className="bg-gray-800 text-white text-center py-4 mt-8">
        <p>¬© 2025 Eixo Seguran√ßa - Todos os direitos reservados</p>
      </footer>
    </div>
  );
}

// Componente para Cadastro da Empresa
function CadastroEmpresa({ setCompanyName }) {
  const [formData, setFormData] = useState({
    razao: "",
    fantasia: "",
    cnpj: "",
    endereco: "",
    bairro: "",
    cidade_estado: "",
    telefone: "",
    email: "",
    responsavel: "",
  });

  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({ ...prev, [name]: value }));
    if (name === "fantasia") setCompanyName(value);
  };

  return (
    <div className="bg-white shadow-md rounded-lg p-6 max-w-3xl mx-auto">
      <h2 className="text-xl font-bold mb-6">Cadastro da Empresa</h2>
      <form className="space-y-4">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-medium mb-1">Raz√£o Social</label>
            <input
              type="text"
              name="razao"
              value={formData.razao}
              onChange={handleChange}
              className="w-full border border-gray-300 rounded-md px-3 py-2"
            />
          </div>
          <div>
            <label className="block text-sm font-medium mb-1">Nome Fantasia</label>
            <input
              type="text"
              name="fantasia"
              value={formData.fantasia}
              onChange={handleChange}
              className="w-full border border-gray-300 rounded-md px-3 py-2"
            />
          </div>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-medium mb-1">CNPJ</label>
            <input
              type="text"
              name="cnpj"
              value={formData.cnpj}
              onChange={handleChange}
              className="w-full border border-gray-300 rounded-md px-3 py-2"
            />
          </div>
          <div>
            <label className="block text-sm font-medium mb-1">Endere√ßo</label>
            <input
              type="text"
              name="endereco"
              value={formData.endereco}
              onChange={handleChange}
              className="w-full border border-gray-300 rounded-md px-3 py-2"
            />
          </div>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-medium mb-1">Bairro</label>
            <input
              type="text"
              name="bairro"
              value={formData.bairro}
              onChange={handleChange}
              className="w-full border border-gray-300 rounded-md px-3 py-2"
            />
          </div>
          <div>
            <label className="block text-sm font-medium mb-1">Cidade / Estado</label>
            <input
              type="text"
              name="cidade_estado"
              value={formData.cidade_estado}
              onChange={handleChange}
              className="w-full border border-gray-300 rounded-md px-3 py-2"
            />
          </div>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-medium mb-1">Telefone</label>
            <input
              type="tel"
              name="telefone"
              value={formData.telefone}
              onChange={handleChange}
              className="w-full border border-gray-300 rounded-md px-3 py-2"
            />
          </div>
          <div>
            <label className="block text-sm font-medium mb-1">E-mail</label>
            <input
              type="email"
              name="email"
              value={formData.email}
              onChange={handleChange}
              className="w-full border border-gray-300 rounded-md px-3 py-2"
            />
          </div>
        </div>

        <div>
          <label className="block text-sm font-medium mb-1">Respons√°vel T√©cnico</label>
          <input
            type="text"
            name="responsavel"
            value={formData.responsavel}
            onChange={handleChange}
            className="w-full border border-gray-300 rounded-md px-3 py-2"
          />
        </div>

        <div className="pt-4">
          <button
            type="submit"
            className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition"
          >
            Salvar Dados
          </button>
        </div>
      </form>
    </div>
  );
}

// Componente para Di√°rias de Consultoria
function ConsultoriaServicos({ selectedServices, setSelectedServices }) {
  const servicesList = [
    { id: 1, name: "Treinamento NR-35", description: "Seguran√ßa para trabalho em altura", price: 1200 },
    { id: 2, name: "Treinamento NR-10 (Reciclagem)", description: "Seguran√ßa em instala√ß√µes el√©tricas", price: 1000 },
    { id: 3, name: "Primeiros Socorros", description: "Te√≥rico+pr√°tico, simula√ß√£o e apostila", price: 1100 },
    { id: 4, name: "Elabora√ß√£o de APR", description: "An√°lise Preliminar de Risco por atividade", price: 430 },
    { id: 5, name: "PT (Permiss√£o de Trabalho)", description: "Documento de autoriza√ß√£o de atividades de risco", price: 430 },
    { id: 6, name: "Campanha de Seguran√ßa (SIPAT, DDS etc.)", description: "Planejamento, execu√ß√£o e registro fotogr√°fico", price: 430 },
    { id: 7, name: "Consultoria T√©cnica em Obra", description: "Visita com relat√≥rio t√©cnico de seguran√ßa", price: 600 },
    { id: 8, name: "Plano de Emerg√™ncia e Rota de Fuga", description: "Avalia√ß√£o, implanta√ß√£o e sinaliza√ß√£o recomendada", price: 600 },
    { id: 9, name: "Dimensionamento de EPI/Extintores", description: "C√°lculo conforme normas regulamentadoras", price: 430 },
    { id: 10, name: "Di√°ria TST", description: "Acompanhamento de atividades em campo", price: 430 },
  ];

  const toggleService = (service) => {
    if (selectedServices.some((s) => s.id === service.id)) {
      setSelectedServices(selectedServices.filter((s) => s.id !== service.id));
    } else {
      setSelectedServices([...selectedServices, service]);
    }
  };

  return (
    <div className="bg-white shadow-md rounded-lg p-6 max-w-3xl mx-auto">
      <h2 className="text-xl font-bold mb-6">Di√°rias de Consultoria</h2>
      <ul className="space-y-3">
        {servicesList.map((service) => (
          <li key={service.id} className="flex items-start">
            <input
              type="checkbox"
              checked={selectedServices.some((s) => s.id === service.id)}
              onChange={() => toggleService(service)}
              className="mt-1 mr-3"
            />
            <div>
              <h3 className="font-semibold">{service.name}</h3>
              <p className="text-sm text-gray-600">{service.description}</p>
              <p className="text-sm text-gray-700 font-medium">R$ {service.price.toFixed(2)}</p>
            </div>
          </li>
        ))}
      </ul>
    </div>
  );
}

// Componente para Emiss√£o de Nota Fiscal
function EmissaoNotaFiscal({ companyName, services }) {
  const total = services.reduce((sum, service) => sum + service.price, 0);

  return (
    <div className="bg-white shadow-md rounded-lg p-6 max-w-3xl mx-auto">
      <h2 className="text-xl font-bold mb-6">Emiss√£o de Nota Fiscal</h2>
      {companyName ? (
        <>
          <p className="mb-4">Empresa: <strong>{companyName}</strong></p>
          <ul className="space-y-2 mb-4">
            {services.map((service) => (
              <li key={service.id} className="flex justify-between">
                <span>{service.name}</span>
                <span>R$ {service.price.toFixed(2)}</span>
              </li>
            ))}
          </ul>
          <hr className="my-4" />
          <p className="text-lg font-bold">Total: R$ {total.toFixed(2)}</p>
          <button className="mt-6 bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-md transition">
            Emitir Nota Fiscal
          </button>
        </>
      ) : (
        <p className="text-yellow-600">Selecione uma empresa antes de emitir a nota fiscal.</p>
      )}
    </div>
  );
}

// Componente Sobre N√≥s
function SobreNos() {
  return (
    <div className="bg-white shadow-md rounded-lg p-6 max-w-3xl mx-auto">
      <h2 className="text-xl font-bold mb-6">Sobre N√≥s</h2>
      <div className="space-y-4">
        <p>
          A <strong>Eixo Seguran√ßa</strong> √© uma empresa especializada em solu√ß√µes t√©cnicas e estrat√©gicas nas √°reas de <strong>Seguran√ßa do Trabalho</strong>, <strong>Preven√ß√£o de Inc√™ndios</strong> e <strong>Engenharia de Seguran√ßa</strong>. Atuamos com foco em obras civis, ind√∫strias, treinamentos e gest√£o de riscos.
        </p>
        <h3 className="font-semibold">Principais Servi√ßos:</h3>
        <ul className="list-disc pl-5 space-y-1">
          <li>üßØ Preven√ß√£o e Combate a Inc√™ndios</li>
          <li>üìö Treinamentos e Capacita√ß√µes</li>
          <li>üìë Documenta√ß√µes e Laudos</li>
          <li>üõ†Ô∏è Acompanhamento T√©cnico</li>
        </ul>
        <h3 className="font-semibold">Contato:</h3>
        <p>(62) 99124-7121 | eixo.seguranca@outlook.com | An√°polis-GO</p>
      </div>
    </div>
  );
}
